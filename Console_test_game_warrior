using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Threading;
using System.Threading.Tasks;

namespace ConsoleApp1
{

    class Game
    {
        private Hero firstPlayer;
        private Hero secondPlayer;
        public Game(Hero firstPlayer, Hero secondPlayer)
        {
            this.firstPlayer = firstPlayer;
            this.secondPlayer = secondPlayer;
        }

        public void Start()
        {
            Console.WriteLine("---------------------- Начало игры ----------------------");

            do
            {

                if (secondPlayer.Health <= 0)
                {                   
                    Console.WriteLine("Игра завершена!!!");
                    break;
                }
                else if (firstPlayer.Health <= 0)
                {                  
                    Console.WriteLine("Игра завершена!!!");
                    break;
                }

                int fortune = new Random().Next(1, 3);
                Thread.Sleep(800);

                if (fortune == 1)
                {
                    secondPlayer.Health -= firstPlayer.Hit();
                    secondPlayer.StateHealth();
                }
                else
                {
                    firstPlayer.Health -= secondPlayer.Hit();
                    firstPlayer.StateHealth();
                }

            }
            while (true);


        }
    }

    abstract class Hero
    {
        public int Power { get; set; }
        public int Magic { get; set; }
        public int Health { get; set; }

        public abstract void StateHealth();
        public abstract int Hit();
       
    }

    class Warrior : Hero
    {
        public Warrior()
        {
            Power = 5;
            Magic = 2;
            Health = 100;
        }

        public override void StateHealth()
        {
            if (Health <= 0)
            {
                Console.ForegroundColor = ConsoleColor.Green;
                Console.WriteLine("Маг убит!!!");
                Console.ForegroundColor = ConsoleColor.Gray;
            }
            else
            {
                Console.WriteLine("Количество жизней у Воина {0}", Health);
            }
                
        }
        public override int Hit()
        {
            Console.ForegroundColor = ConsoleColor.Red;
            Console.WriteLine("Воин наносит удар!!!");
            Console.ForegroundColor = ConsoleColor.Gray;
            return Power * 2 + 5;
        }
      
    }

    class Mag : Hero
    {
        public Mag()
        {
            Power = 2;
            Magic = 7;
            Health = 50;
        }
        public override void StateHealth()
        {
            if (Health <= 0)
            {
                Console.ForegroundColor = ConsoleColor.Green;
                Console.WriteLine("Маг убит!!!");
                Console.ForegroundColor = ConsoleColor.Gray;
            }
            else
            {
                Console.WriteLine("Количество жизней у Мага {0}", Health);
            }

        }
        public override int Hit()
        {
            Console.ForegroundColor = ConsoleColor.DarkBlue;
            Console.WriteLine("Маг наносит удар!!!");
            Console.ForegroundColor = ConsoleColor.Gray;
            return Magic * 2 + 5;
        }

     

    }


    abstract class Weapon
    {

    }

    class Sword : Weapon
    {

    }

    class Stick : Weapon
    {

    }

    internal class Program
    {
        static void Main(string[] args)
        {
            Warrior warrior = new Warrior();
            Mag mag = new Mag();

            Game game = new Game(mag, warrior);
            game.Start();


        }
    }
}
